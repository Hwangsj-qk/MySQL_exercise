### SubQuery, 서브쿼리, 부속질의
- 다른 SQL 쿼리 내부에 포함되어 있는 쿼리
    - 주 쿼리(Main Query)
    - 부 쿼리 (Sub Query)
- 서브쿼리는 괄호 (...) 내부에 작성되어 주 쿼리와 구분
- 서브 쿼리의 결과는 단일 행 또는 다중 행 결과를 반환 
- 서브쿼리는 주 쿼리보다 먼저 실행되고, 서브쿼리의 결과 주 쿼리에 사용
- 서브쿼리의 사용처
    - WHERE절, SELECT절, FROM절, HAIVNG절 등...
    - WHERE절 : 데이터 필터링을 하기 위해 사용

1. 단일 행(Single row) 서브쿼리
    - 반드시 하나의 행만 반환 해야 함.
    - 하나의 결과값만 나오는 쿼리를 서브쿼리로 작성하거나 집계함수 등을 사용하여 반드시 하나의 행이 결과값으로 갖도록 보장해야 함. 
    - 단일행 서브쿼리는 =, <,> 등의 비교연산자와 함께 사용 
    ```sql
        SELECT 컬럼명 ... FROM 테이블명 WHERE 조건 = (서브쿼리);
        -- 등호(=)이외에 다른 연산자도 사용 가능 
    ```

2. 다중 행(Multi row) 서브쿼리
    - 쿼리 실행 결과로 여러 행을 반환하는 서브 쿼리
    - IN, ANY ALL EXTISTS 등의 연산자와 함께 사용
    ```sql
        SELECT 컬럼명 ... FROM 테이블명 WHERE IN (서브쿼리);
    ```
    1) IN (서브쿼리) : 메인쿼리의 비교조건이 서브쿼리 결과 중 하나라도 동일하면 참 (OR 조건)
    2) ANY (서브쿼리) : 메인쿼리의 비교조건이 서브쿼리 결과 중 하나라도 동일하면 참 (OR 조건)
        - **IN은 비교연산자를 사용하지 않고, ANY는 비교연산자를 사용한다.**
    3)  ALL (서브쿼리) : 메인쿼리의 비교조건이 서브쿼리 결과 중 모두 동일하면 참 (AND 조건)    
        - 비교연산자 사용 
        - 비교조건 < ALL(10,20,30) : 최솟값(10보다 작은)
        - 비교조건 > ALL(10,20,30) : 최댓값(30보다 큰)
    4) EXTISTS (서브쿼리) : 서브쿼리의 결과가 하나라도 존재하면 참

    - 서브쿼리를 사용하는 위치에 따라 분류 
    1) WHERE절 : 특정 기준에 맞는 데이터 필터링을 위해 서브쿼리 사용
    2) SELECT절: 서브쿼리를 사용한 결과 값을, 메인 쿼리의 결과에 포함
        - 단일 행을 반환하여 사용 
        - 데이터베이스에 따라 성능 및 비용 문제가 발생할 수 있음. 
        - 데이터 양이 많을 경우 다른 방법을 사용하는 것을 권장 
        - 쿼리의 결과를 유연하게 동적으로 표현하고 싶을 때 사용     
    3) FROM절: 인라인 뷰(Inline View)
        - 서브쿼리가 임시 테이블처럼 동작하게 하여 메인 쿼리에 사용 
